{"status":{},"contains_secrets":false,"product_version":"2.9.8","spec":{"description":"","resources":{"client_attrs":{"None":{"y":174,"x":59},"7df0cc1c_deployment":{"y":174,"x":59}},"service_definition_list":[{"singleton":false,"action_list":[{"description":"System action for creating an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"GENERIC CENTOS 7 CLOUD"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"9807fe1b_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"a992bd98_runbook","main_task_local_reference":{"kind":"app_task","name":"9807fe1b_dag"},"variable_list":[]},"name":"action_create"},{"description":"System action for deleting an application. Deletes created VMs as well","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"GENERIC CENTOS 7 CLOUD"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"d3ab8fc3_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"4fd20db5_runbook","main_task_local_reference":{"kind":"app_task","name":"d3ab8fc3_dag"},"variable_list":[]},"name":"action_delete"},{"description":"System action for starting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"GENERIC CENTOS 7 CLOUD"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"bfc74f9b_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"e4dbbc0a_runbook","main_task_local_reference":{"kind":"app_task","name":"bfc74f9b_dag"},"variable_list":[]},"name":"action_start"},{"description":"System action for stopping an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"GENERIC CENTOS 7 CLOUD"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"a5bfd22c_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"0ecebc2f_runbook","main_task_local_reference":{"kind":"app_task","name":"a5bfd22c_dag"},"variable_list":[]},"name":"action_stop"},{"description":"System action for restarting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"GENERIC CENTOS 7 CLOUD"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"208adab8_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"4e962233_runbook","main_task_local_reference":{"kind":"app_task","name":"208adab8_dag"},"variable_list":[]},"name":"action_restart"}],"depends_on_list":[],"name":"GENERIC CENTOS 7 CLOUD","port_list":[],"tier":"","variable_list":[],"description":""}],"substrate_definition_list":[{"description":"","action_list":[],"type":"AHV_VM","name":"CLOUD_AHV","readiness_probe":{"connection_type":"SSH","retries":"5","connection_protocol":"","connection_port":22,"address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","delay_secs":"30","disable_readiness_probe":false,"login_credential_local_reference":{"kind":"app_credential","name":"CENTOS"}},"editables":{"readiness_probe":{"connection_type":true,"connection_port":true,"timeout_secs":true},"create_spec":{"name":true,"resources":{"nic_list":{"0":{"subnet_reference":true}},"serial_port_list":{},"num_vcpus_per_socket":true,"num_sockets":true,"memory_size_mib":true,"boot_config":true,"guest_customization":true,"disk_list":{"0":{"data_source_reference":true,"device_properties":{"disk_address":{"adapter_type":true},"device_type":true}}}}}},"os_type":"Linux","create_spec":{"name":"folding-at-home-@@{calm_array_index}@@","resources":{"nic_list":[{"nic_type":"NORMAL_NIC","ip_endpoint_list":[],"network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","subnet_reference":{"kind":"subnet","type":"","name":"","uuid":"f3d588ff-0ca6-4ad3-8ec2-9bf28dced96f"},"type":""}],"serial_port_list":[],"guest_tools":null,"num_vcpus_per_socket":8,"num_sockets":2,"gpu_list":[],"memory_size_mib":4096,"parent_reference":null,"hardware_clock_timezone":"","guest_customization":{"cloud_init":{"meta_data":"","type":"","user_data":"#cloud-config\ndisable_root: false\nssh_pwauth: true\nusers:\n  - name: nutanix\n    lock-passwd: false\n    plain_text_passwd: '@@{DEFAULT_PASSWORD}@@'\n    sudo: ['ALL=(ALL) NOPASSWD:ALL']\n  - name: centos\n    ssh-authorized-keys:\n      - @@{INSTANCE_PUBLIC_KEY}@@\n    sudo: ['ALL=(ALL) NOPASSWD:ALL']\n"},"type":"","sysprep":null},"power_state":"ON","type":"","account_uuid":"fdc80419-ece1-44d6-b132-066288b370e8","boot_config":{"boot_device":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"}},"type":"","boot_type":"","mac_address":""},"disk_list":[{"data_source_reference":{"kind":"image","type":"","name":"CentOS-7-x86_64-GenericCloud-1907","uuid":"61043414-150d-4cb3-a75d-c3b15b9ebd77"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"},"device_type":"DISK"}}]},"availability_zone_reference":null,"backup_policy":null,"type":"","cluster_reference":null,"categories":""},"variable_list":[]}],"credential_definition_list":[{"username":"centos","description":"","type":"KEY","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{}}},"name":"CENTOS","editables":{"username":true,"secret":true}}],"package_definition_list":[{"description":"","action_list":[],"type":"DEB","service_local_reference_list":[{"kind":"app_service","name":"GENERIC CENTOS 7 CLOUD"}],"name":"GENERIC_CLOUD_PKG","version":"","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"GENERIC_CLOUD_PKG"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[{"kind":"app_task","name":"Initial Config Update System and Install FAH"}],"name":"27550204_dag","state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_package","name":"GENERIC_CLOUD_PKG"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[],"name":"Initial Config Update System and Install FAH","state":"ACTIVE","attrs":{"exit_status":[],"script":"#!\/bin\/bash\nset -ex\n# disable selinux\nsudo setenforce 0\n# set timezone to new york\nsudo timedatectl set-timezone America\/New_York\n#disable 70-persistent-net.rules in udev\nsudo rm -rf \/etc\/udev\/rules.d\/70-persistent-net.rules\nsudo mkdir \/etc\/udev\/rules.d\/70-persistent-net.rules\nsudo yum install -y epel-release wget\n# install xfce\n#sudo yum groupinstall \"Xfce\" -y\n# set gui default\n#sudo systemctl set-default graphical.target\n# update system\nsudo yum update -y\n# install FAH client\/control\nwget https:\/\/download.foldingathome.org\/releases\/public\/release\/fahclient\/centos-5.3-64bit\/v7.4\/fahclient-7.4.4-1.x86_64.rpm\nwget https:\/\/download.foldingathome.org\/releases\/public\/release\/fahcontrol\/centos-5.3-64bit\/v7.4\/fahcontrol-7.4.4-1.noarch.rpm\nsudo rpm -i --nodeps fah*\ncd \/usr\/lib\nsudo ln -s \/usr\/lib\/python2.7 \/usr\/lib\/python2.6\nsudo cp -R \/usr\/lib\/python2.6\/site-packages\/fah \/usr\/lib\/python2.7\/site-packages\/fah\n# get fah config\nsudo wget https:\/\/raw.githubusercontent.com\/rehmert\/fah\/master\/config.xml\nsudo mv -f config.xml \/etc\/fahclient\/config.xml\nsudo shutdown -r -t 30","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"CENTOS"}},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"124852e5_runbook","state":"ACTIVE","main_task_local_reference":{"kind":"app_task","name":"27550204_dag"},"message_list":[],"variable_list":[]},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"GENERIC_CLOUD_PKG"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[{"kind":"app_task","name":"Uninstall"}],"name":"11c3b039_dag","state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"GENERIC CENTOS 7 CLOUD"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[],"name":"Uninstall","state":"ACTIVE","attrs":{"exit_status":[],"script":"echo \"uninstall\"","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"CENTOS"}},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"afe7faff_runbook","state":"ACTIVE","main_task_local_reference":{"kind":"app_task","name":"11c3b039_dag"},"message_list":[],"variable_list":[]}},"variable_list":[]}],"app_profile_list":[{"deployment_create_list":[{"type":"GREENFIELD","action_list":[],"name":"7df0cc1c_deployment","min_replicas":"1","default_replicas":"1","depends_on_list":[],"editables":{"min_replicas":true,"default_replicas":true,"max_replicas":true},"published_service_local_reference_list":[],"max_replicas":"4","package_local_reference_list":[{"kind":"app_package","name":"GENERIC_CLOUD_PKG"}],"substrate_local_reference":{"kind":"app_substrate","name":"CLOUD_AHV"},"variable_list":[],"description":""}],"description":"","action_list":[],"name":"Nutanix","variable_list":[{"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","name":"INSTANCE_PUBLIC_KEY","value":"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDO92r8n3D4eRcWsadolVOtB+nvkhSzyl2A25ISQh2Ye7hfVG4HN3htjixInpa3JYAVd96t9ARrBmokzZtr6Ehj52lLYzzg2x5pcTQTQDTdFhKf5BmJIXkU7SmLgvTwYLqRCXgyfZB8gqir2slT6wJBYOMrB5DR7bMzMNElY\/8y6TAMJtOJXF2l2AguAL43adxoBXtPLniGoOjjRqXaXJm744eQNS4fyCs8yaWQ\/AX5JXd2L2D\/0TYaYkYX7wUK5GN18alvFlgv8M1cMlx\/PIgm1zYILkfDZLrty8adTcwkqnN5DuGa13PeHhiy6L2lIfesysJEX3oZhVY2dZtgai7j","label":"","attrs":{"type":""},"editables":{"value":true},"is_hidden":false},{"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","name":"DEFAULT_PASSWORD","value":"nutanix\/4u","label":"","attrs":{"type":""},"editables":{"value":true},"is_hidden":false}]}],"published_service_definition_list":[],"default_credential_local_reference":{"kind":"app_credential","name":"CENTOS"},"type":"USER"},"name":"folding-at-home-centos"},"api_version":"3.0","metadata":{"last_update_time":"1584988937618195","kind":"blueprint","spec_version":15,"creation_time":"1584978675951854","name":"folding-at-home-centos"}}