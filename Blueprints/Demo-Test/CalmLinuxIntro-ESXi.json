{"status":{},"product_version":"2.7.1.2","spec":{"description":"","resources":{"client_attrs":{"c7c98dbc_deployment":{"y":232,"x":614},"b5a442af_deployment":{"y":216,"x":290},"0dbf7606_deployment":{"y":216,"x":-17}},"service_definition_list":[{"singleton":false,"action_list":[{"description":"System action for creating an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"WebServer"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"3345c8ec_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"cb6c68d2_runbook","main_task_local_reference":{"kind":"app_task","name":"3345c8ec_dag"},"variable_list":[]},"name":"action_create"},{"description":"System action for deleting an application. Deletes created VMs as well","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"WebServer"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"89116463_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"7813d60e_runbook","main_task_local_reference":{"kind":"app_task","name":"89116463_dag"},"variable_list":[]},"name":"action_delete"},{"description":"System action for starting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"WebServer"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"890e8ab7_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"b440004b_runbook","main_task_local_reference":{"kind":"app_task","name":"890e8ab7_dag"},"variable_list":[]},"name":"action_start"},{"description":"System action for stopping an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"WebServer"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"306d3f24_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"a96a902e_runbook","main_task_local_reference":{"kind":"app_task","name":"306d3f24_dag"},"variable_list":[]},"name":"action_stop"},{"description":"System action for restarting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"WebServer"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"7397e881_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"ac6a0d0f_runbook","main_task_local_reference":{"kind":"app_task","name":"7397e881_dag"},"variable_list":[]},"name":"action_restart"}],"depends_on_list":[{"kind":"app_service","name":"MySQL"}],"name":"WebServer","port_list":[],"tier":"","variable_list":[],"description":""},{"singleton":false,"action_list":[{"description":"System action for creating an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"MySQL"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"3345c8ec_dag_cloned_1","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"cb6c68d2_runbook_cloned_0","main_task_local_reference":{"kind":"app_task","name":"3345c8ec_dag_cloned_1"},"variable_list":[]},"name":"action_create"},{"description":"System action for deleting an application. Deletes created VMs as well","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"MySQL"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"89116463_dag_cloned_1","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"7813d60e_runbook_cloned_0","main_task_local_reference":{"kind":"app_task","name":"89116463_dag_cloned_1"},"variable_list":[]},"name":"action_delete"},{"description":"System action for starting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"MySQL"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"890e8ab7_dag_cloned_1","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"b440004b_runbook_cloned_0","main_task_local_reference":{"kind":"app_task","name":"890e8ab7_dag_cloned_1"},"variable_list":[]},"name":"action_start"},{"description":"System action for stopping an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"MySQL"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"306d3f24_dag_cloned_1","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"a96a902e_runbook_cloned_0","main_task_local_reference":{"kind":"app_task","name":"306d3f24_dag_cloned_1"},"variable_list":[]},"name":"action_stop"},{"description":"System action for restarting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"MySQL"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"7397e881_dag_cloned_1","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"ac6a0d0f_runbook_cloned_0","main_task_local_reference":{"kind":"app_task","name":"7397e881_dag_cloned_1"},"variable_list":[]},"name":"action_restart"}],"depends_on_list":[],"name":"MySQL","port_list":[],"tier":"","variable_list":[],"description":""},{"singleton":false,"action_list":[{"description":"System action for creating an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"HAProxy"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"3345c8ec_dag_cloned_1","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"cb6c68d2_runbook_cloned_1","main_task_local_reference":{"kind":"app_task","name":"3345c8ec_dag_cloned_1"},"variable_list":[]},"name":"action_create"},{"description":"System action for deleting an application. Deletes created VMs as well","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"HAProxy"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"89116463_dag_cloned_1","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"7813d60e_runbook_cloned_1","main_task_local_reference":{"kind":"app_task","name":"89116463_dag_cloned_1"},"variable_list":[]},"name":"action_delete"},{"description":"System action for starting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"HAProxy"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"890e8ab7_dag_cloned_1","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"b440004b_runbook_cloned_1","main_task_local_reference":{"kind":"app_task","name":"890e8ab7_dag_cloned_1"},"variable_list":[]},"name":"action_start"},{"description":"System action for stopping an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"HAProxy"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"306d3f24_dag_cloned_1","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"a96a902e_runbook_cloned_1","main_task_local_reference":{"kind":"app_task","name":"306d3f24_dag_cloned_1"},"variable_list":[]},"name":"action_stop"},{"description":"System action for restarting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"HAProxy"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"7397e881_dag_cloned_1","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"ac6a0d0f_runbook_cloned_1","main_task_local_reference":{"kind":"app_task","name":"7397e881_dag_cloned_1"},"variable_list":[]},"name":"action_restart"}],"depends_on_list":[{"kind":"app_service","name":"WebServer"}],"name":"HAProxy","port_list":[],"tier":"","variable_list":[],"description":""}],"substrate_definition_list":[{"description":"","action_list":[],"type":"VMWARE_VM","name":"WebServerAHV","readiness_probe":{"connection_type":"SSH","retries":"5","disable_readiness_probe":false,"address":"@@{platform.ipAddressList[0]}@@","delay_secs":"60","connection_port":22,"login_credential_local_reference":{"kind":"app_credential","name":"CENTOS"}},"editables":{"create_spec":{"resources":{"template_nic_list":{},"template_disk_list":{},"controller_list":{},"template_controller_list":{},"nic_list":{}}}},"os_type":"Linux","create_spec":{"name":"WEB-@@{calm_array_index}@@-@@{calm_time}@@","type":"PROVISION_VMWARE_VM","drs_mode":false,"cluster":"","host":"4dda2483-2668-48f9-e3d8-94c691afe785","resources":{"nic_list":[],"template_nic_list":[],"template_controller_list":[],"num_vcpus_per_socket":1,"num_sockets":1,"controller_list":[],"memory_size_mib":2048,"power_state":"poweron","guest_customization":{"customization_name":"","cloud_init":"#cloud-config\nusers:\n  - name: centos\n    ssh-authorized-keys:\n      - @@{CENTOS.public_key}@@\n    sudo: ['ALL=(ALL) NOPASSWD:ALL']","linux_data":null,"customization_type":"GUEST_OS_LINUX","type":"","windows_data":null},"template_disk_list":[],"type":"","account_uuid":"62da2f70-140d-4be5-e882-111119f3bbe7","disk_list":[]},"template":"5036a423-ca70-e1e7-212e-998f48cddfa5","datastore":"ds:\/\/\/vmfs\/volumes\/f3a24513-30a3fab2\/","storage_pod":"","clone_is_template":false},"variable_list":[]},{"description":"","action_list":[],"type":"VMWARE_VM","name":"MySQLAHV","readiness_probe":{"connection_type":"SSH","retries":"5","disable_readiness_probe":false,"address":"@@{platform.ipAddressList[0]}@@","delay_secs":"60","connection_port":22,"login_credential_local_reference":{"kind":"app_credential","name":"CENTOS"}},"editables":{"create_spec":{"resources":{"template_nic_list":{},"template_disk_list":{},"controller_list":{},"template_controller_list":{},"nic_list":{}}}},"os_type":"Linux","create_spec":{"name":"SQL-@@{calm_array_index}@@-@@{calm_time}@@","type":"PROVISION_VMWARE_VM","drs_mode":false,"cluster":"","host":"7b3f7cbe-99af-543d-caec-94c691aa484b","resources":{"nic_list":[],"template_nic_list":[],"template_controller_list":[],"num_vcpus_per_socket":1,"num_sockets":1,"controller_list":[],"memory_size_mib":2048,"power_state":"poweron","guest_customization":{"customization_name":"","cloud_init":"#cloud-config\nusers:\n  - name: centos\n    ssh-authorized-keys:\n      - @@{CENTOS.public_key}@@\n    sudo: ['ALL=(ALL) NOPASSWD:ALL']","linux_data":null,"customization_type":"GUEST_OS_LINUX","type":"","windows_data":null},"template_disk_list":[],"type":"","account_uuid":"62da2f70-140d-4be5-e882-111119f3bbe7","disk_list":[]},"template":"5036a423-ca70-e1e7-212e-998f48cddfa5","datastore":"ds:\/\/\/vmfs\/volumes\/f3a24513-30a3fab2\/","storage_pod":"","clone_is_template":false},"variable_list":[]},{"description":"","action_list":[],"type":"VMWARE_VM","name":"HAProxyAHV","readiness_probe":{"connection_type":"SSH","retries":"5","disable_readiness_probe":false,"address":"@@{platform.ipAddressList[0]}@@","delay_secs":"60","connection_port":22,"login_credential_local_reference":{"kind":"app_credential","name":"CENTOS"}},"editables":{"create_spec":{"resources":{"template_nic_list":{},"template_disk_list":{},"controller_list":{},"template_controller_list":{},"nic_list":{}}}},"os_type":"Linux","create_spec":{"name":"LB-@@{calm_array_index}@@-@@{calm_time}@@","type":"PROVISION_VMWARE_VM","drs_mode":false,"cluster":"","host":"7b3f7cbe-99af-543d-caec-94c691aa484b","resources":{"nic_list":[],"template_nic_list":[],"template_controller_list":[],"num_vcpus_per_socket":1,"num_sockets":1,"controller_list":[],"memory_size_mib":2048,"power_state":"poweron","guest_customization":{"customization_name":"","cloud_init":"#cloud-config\nusers:\n  - name: centos\n    ssh-authorized-keys:\n      - @@{CENTOS.public_key}@@\n    sudo: ['ALL=(ALL) NOPASSWD:ALL']","linux_data":null,"customization_type":"GUEST_OS_LINUX","type":"","windows_data":null},"template_disk_list":[],"type":"","account_uuid":"62da2f70-140d-4be5-e882-111119f3bbe7","disk_list":[]},"template":"5036a423-ca70-e1e7-212e-998f48cddfa5","datastore":"ds:\/\/\/vmfs\/volumes\/f3a24513-30a3fab2\/","storage_pod":"","clone_is_template":false},"variable_list":[]}],"credential_definition_list":[{"username":"centos","description":"","type":"KEY","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{}}},"name":"CENTOS"},{"username":"root","description":"","type":"PASSWORD","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{}}},"name":"CENTOS7_1908_root"}],"package_definition_list":[{"description":"","action_list":[],"type":"DEB","service_local_reference_list":[{"kind":"app_service","name":"WebServer"}],"name":"Web Package Install","version":"","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Web Package Install"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[{"kind":"app_task","name":"Install_WebServer"}],"name":"e4c85e99_dag","state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"WebServer"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[],"name":"Install_WebServer","state":"ACTIVE","attrs":{"exit_status":[],"script":"#!\/bin\/bash\nset -ex\n\nsudo yum update -y\nsudo yum -y install epel-release\nsudo setenforce 0\nsudo sed -i 's\/enforcing\/disabled\/g' \/etc\/selinux\/config \/etc\/selinux\/config\nsudo systemctl stop firewalld || true\nsudo systemctl disable firewalld || true\nsudo rpm -Uvh https:\/\/mirror.webtatic.com\/yum\/el7\/webtatic-release.rpm\nsudo yum update -y\nsudo yum install -y nginx php56w-fpm php56w-cli php56w-mcrypt php56w-mysql php56w-mbstring php56w-dom git unzip\n\nsudo mkdir -p \/var\/www\/laravel\necho \"server {\n listen 80 default_server;\n listen [::]:80 default_server ipv6only=on;\nroot \/var\/www\/laravel\/public\/;\n index index.php index.html index.htm;\nlocation \/ {\n try_files \\$uri \\$uri\/ \/index.php?\\$query_string;\n }\n # pass the PHP scripts to FastCGI server listening on \/var\/run\/php5-fpm.sock\n location ~ \\.php$ {\n try_files \\$uri \/index.php =404;\n fastcgi_split_path_info ^(.+\\.php)(\/.+)\\$;\n fastcgi_pass 127.0.0.1:9000;\n fastcgi_index index.php;\n fastcgi_param SCRIPT_FILENAME \\$document_root\\$fastcgi_script_name;\n include fastcgi_params;\n }\n}\" | sudo tee \/etc\/nginx\/conf.d\/laravel.conf\nsudo sed -i 's\/80 default_server\/80\/g' \/etc\/nginx\/nginx.conf\nif `grep \"cgi.fix_pathinfo\" \/etc\/php.ini` ; then\n sudo sed -i 's\/cgi.fix_pathinfo=1\/cgi.fix_pathinfo=0\/' \/etc\/php.ini\nelse\n sudo sed -i 's\/;cgi.fix_pathinfo=1\/cgi.fix_pathinfo=0\/' \/etc\/php.ini\nfi\n\nsudo systemctl enable php-fpm\nsudo systemctl enable nginx\nsudo systemctl restart php-fpm\nsudo systemctl restart nginx\n\nif [ ! -e \/usr\/local\/bin\/composer ]\nthen\n curl -sS https:\/\/getcomposer.org\/installer | php\n sudo mv composer.phar \/usr\/local\/bin\/composer\n sudo chmod +x \/usr\/local\/bin\/composer\nfi\n\nsudo git clone https:\/\/github.com\/ideadevice\/quickstart-basic.git \/var\/www\/laravel\nsudo sed -i 's\/DB_HOST=.*\/DB_HOST=@@{MySQL.address}@@\/' \/var\/www\/laravel\/.env\n\nsudo su - -c \"cd \/var\/www\/laravel; composer install\"\nif [ \"@@{calm_array_index}@@\" == \"0\" ]; then\n sudo su - -c \"cd \/var\/www\/laravel; php artisan migrate\"\nfi\n\nsudo chown -R nginx:nginx \/var\/www\/laravel\nsudo chmod -R 777 \/var\/www\/laravel\/\nsudo systemctl restart nginx\n","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"CENTOS"}},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"eb631cfe_runbook","state":"ACTIVE","main_task_local_reference":{"kind":"app_task","name":"e4c85e99_dag"},"message_list":[],"variable_list":[]},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Web Package Install"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[{"kind":"app_task","name":"Uninstall_WebServer"}],"name":"5b463c6c_dag","state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"WebServer"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[],"name":"Uninstall_WebServer","state":"ACTIVE","attrs":{"exit_status":[],"script":"#!\/bin\/bash\nset -ex\n\nsudo rm -rf \/var\/www\/laravel\nsudo yum erase -y nginx\n","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"CENTOS"}},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"31063cdb_runbook","state":"ACTIVE","main_task_local_reference":{"kind":"app_task","name":"5b463c6c_dag"},"message_list":[],"variable_list":[]}},"variable_list":[]},{"description":"","action_list":[],"type":"DEB","service_local_reference_list":[{"kind":"app_service","name":"MySQL"}],"name":"MySQL Package Install","version":"","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"MySQL Package Install"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[{"kind":"app_task","name":"Install_sql"}],"name":"e4c85e99_dag_cloned_1","state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"MySQL"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[],"name":"Install_sql","state":"ACTIVE","attrs":{"exit_status":[],"script":"#!\/bin\/bash\nset -ex\n\nsudo yum install -y \"http:\/\/repo.mysql.com\/mysql-community-release-el7-5.noarch.rpm\"\nsudo yum update -y\nsudo setenforce 0\nsudo sed -i 's\/enforcing\/disabled\/g' \/etc\/selinux\/config \/etc\/selinux\/config\nsudo systemctl stop firewalld || true\nsudo systemctl disable firewalld || true\nsudo yum install -y mysql-community-server.x86_64\n\nsudo \/bin\/systemctl start mysqld\nsudo \/bin\/systemctl enable mysqld\n\n#Mysql secure installation\nmysql -u root<<-EOF\n\nUPDATE mysql.user SET Password=PASSWORD('@@{Mysql_password}@@') WHERE User='@@{Mysql_user}@@';\nDELETE FROM mysql.user WHERE User='@@{Mysql_user}@@' AND Host NOT IN ('localhost', '127.0.0.1', '::1');\nDELETE FROM mysql.user WHERE User='';\nDELETE FROM mysql.db WHERE Db='test' OR Db='test\\_%';\n\nFLUSH PRIVILEGES;\nEOF\n\nmysql -u @@{Mysql_user}@@ -p@@{Mysql_password}@@ <<-EOF\nCREATE DATABASE @@{Database_name}@@;\nGRANT ALL PRIVILEGES ON homestead.* TO '@@{Database_name}@@'@'%' identified by 'secret';\n\nFLUSH PRIVILEGES;\nEOF\n","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"CENTOS"}},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"eb631cfe_runbook_cloned_0","state":"ACTIVE","main_task_local_reference":{"kind":"app_task","name":"e4c85e99_dag_cloned_1"},"message_list":[],"variable_list":[]},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"MySQL Package Install"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[{"kind":"app_task","name":"Task1"}],"name":"5b463c6c_dag_cloned_1","state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"MySQL"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[],"name":"Task1","state":"ACTIVE","attrs":{"exit_status":[],"script":"#!\/bin\/bash\necho \"Goodbye!\"\n","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"CENTOS"}},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"31063cdb_runbook_cloned_0","state":"ACTIVE","main_task_local_reference":{"kind":"app_task","name":"5b463c6c_dag_cloned_1"},"message_list":[],"variable_list":[]}},"variable_list":[]},{"description":"","action_list":[],"type":"DEB","service_local_reference_list":[{"kind":"app_service","name":"HAProxy"}],"name":"HAProxy Package","version":"","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"HAProxy Package"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[{"kind":"app_task","name":"Install_HAProxy"}],"name":"e4c85e99_dag_cloned_1","state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"HAProxy"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[],"name":"Install_HAProxy","state":"ACTIVE","attrs":{"exit_status":[],"script":"#!\/bin\/bash\nset -ex\n\nsudo yum update -y\nsudo yum install -y haproxy\nsudo setenforce 0\nsudo sed -i 's\/enforcing\/disabled\/g' \/etc\/selinux\/config \/etc\/selinux\/config\nsudo systemctl stop firewalld || true\nsudo systemctl disable firewalld || true\n\necho \"global\n log 127.0.0.1 local0\n log 127.0.0.1 local1 notice\n maxconn 4096\n quiet\n user haproxy\n group haproxy\ndefaults\n log global\n mode http\n retries 3\n timeout client 50s\n timeout connect 5s\n timeout server 50s\n option dontlognull\n option httplog\n option redispatch\n balance roundrobin\n# Set up application listeners here.\nlisten admin\n bind 127.0.0.1:22002\n mode http\n stats uri \/\nfrontend http\n maxconn 2000\n bind 0.0.0.0:80\n default_backend servers-http\nbackend servers-http\" | sudo tee \/etc\/haproxy\/haproxy.cfg\n\nhosts=$(echo \"@@{WebServer.address}@@\" | tr \",\" \"\\n\")\nport=80\n\nfor host in $hosts\n  do echo \" server host-${host} ${host}:${port} weight 1 maxconn 100 check\" | sudo tee -a \/etc\/haproxy\/haproxy.cfg\ndone\n\nsudo systemctl daemon-reload\nsudo systemctl enable haproxy\nsudo systemctl restart haproxy\n","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"CENTOS"}},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"eb631cfe_runbook_cloned_1","state":"ACTIVE","main_task_local_reference":{"kind":"app_task","name":"e4c85e99_dag_cloned_1"},"message_list":[],"variable_list":[]},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"HAProxy Package"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[{"kind":"app_task","name":"Uninstall_HAProxy"}],"name":"5b463c6c_dag_cloned_1","state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"HAProxy"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[],"name":"Uninstall_HAProxy","state":"ACTIVE","attrs":{"exit_status":[],"script":"#!\/bin\/bash\nset -ex\n\nsudo\nyum -y erase haproxy\n\n","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"CENTOS"}},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"31063cdb_runbook_cloned_1","state":"ACTIVE","main_task_local_reference":{"kind":"app_task","name":"5b463c6c_dag_cloned_1"},"message_list":[],"variable_list":[]}},"variable_list":[]}],"app_profile_list":[{"deployment_create_list":[{"type":"GREENFIELD","action_list":[],"depends_on_list":[],"name":"b5a442af_deployment","published_service_local_reference_list":[],"max_replicas":"4","package_local_reference_list":[{"kind":"app_package","name":"Web Package Install"}],"substrate_local_reference":{"kind":"app_substrate","name":"WebServerAHV"},"min_replicas":"2","variable_list":[],"description":""},{"type":"GREENFIELD","action_list":[],"depends_on_list":[],"name":"0dbf7606_deployment","published_service_local_reference_list":[],"max_replicas":"1","package_local_reference_list":[{"kind":"app_package","name":"MySQL Package Install"}],"substrate_local_reference":{"kind":"app_substrate","name":"MySQLAHV"},"min_replicas":"1","variable_list":[],"description":""},{"type":"GREENFIELD","action_list":[],"depends_on_list":[],"name":"c7c98dbc_deployment","published_service_local_reference_list":[],"max_replicas":"1","package_local_reference_list":[{"kind":"app_package","name":"HAProxy Package"}],"substrate_local_reference":{"kind":"app_substrate","name":"HAProxyAHV"},"min_replicas":"1","variable_list":[],"description":""}],"description":"","action_list":[],"name":"Default","variable_list":[{"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","name":"User_initials","value":"dl","label":"","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}},{"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","name":"Mysql_user","value":"root","label":"","attrs":{"type":""},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}},{"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"SECRET","name":"Mysql_password","value":"","label":"","attrs":{"is_secret_modified":false,"secret_reference":{},"type":"SECRET"},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}},{"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","name":"Database_name","value":"homestead","label":"","attrs":{"type":""},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}}]}],"published_service_definition_list":[],"default_credential_local_reference":{"kind":"app_credential","name":"CENTOS"},"type":"USER"},"name":"CalmLinuxIntro-ESXi"},"api_version":"3.0","metadata":{"last_update_time":"1583767146123682","kind":"blueprint","spec_version":2,"creation_time":"1583766802760805","name":"CalmLinuxIntro-ESXi"}}